<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KB Baby Sitter Match</title>

    <style>
      :root {
        --bg: #0b1020;
        --card: rgba(255, 255, 255, 0.06);
        --stroke: rgba(255, 255, 255, 0.14);
        --text: rgba(255, 255, 255, 0.92);
        --muted: rgba(255, 255, 255, 0.65);

        --primary: #7c5cff;
        --accent: #42d3ff;
        --danger: #ff4d6d;
        --warning: #ffcc66;
        --success: #2ee59d;

        --shadow: 0 10px 35px rgba(0, 0, 0, 0.45);
        --radius: 18px;
      }

      * { box-sizing: border-box; }
      html, body { height: 100%; }

      body {
        margin: 0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
        color: var(--text);
        background:
          radial-gradient(1200px 700px at 15% 10%, rgba(124, 92, 255, 0.25), transparent 60%),
          radial-gradient(900px 600px at 85% 15%, rgba(66, 211, 255, 0.22), transparent 60%),
          radial-gradient(900px 700px at 50% 85%, rgba(46, 229, 157, 0.14), transparent 65%),
          var(--bg);
        display: grid;
        place-items: center;
        padding: 28px 16px;
      }

      .wrap { width: min(1280px, 100%); display: grid; grid-template-columns: 1.25fr 0.75fr; gap: 18px; }
      @media (max-width: 980px) { .wrap { grid-template-columns: 1fr; } }

      .panel {
        border: 1px solid var(--stroke);
        background: linear-gradient(180deg, var(--card), rgba(255,255,255,0.03));
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        overflow: hidden;
      }

      .hero { padding: 22px; border-bottom: 1px solid var(--stroke); }
      .brand { display: flex; align-items: center; gap: 12px; }
      .logo {
        width: 46px; height: 46px; border-radius: 14px;
        border: 1px solid var(--stroke);
        background: linear-gradient(135deg, rgba(124,92,255,0.95), rgba(66,211,255,0.55));
      }
      h1 { margin: 0; font-size: 20px; }
      .tagline { margin: 6px 0 0; color: var(--muted); font-size: 14px; line-height: 1.35; }
      .content { padding: 18px 22px 22px; }

      .segmented {
        display: grid; grid-template-columns: 1fr 1fr;
        background: rgba(255,255,255,0.05);
        border: 1px solid var(--stroke);
        border-radius: 999px;
        overflow: hidden;
      }
      .segBtn {
        border: 0; background: transparent; color: var(--muted);
        padding: 10px 12px; font-weight: 900; cursor: pointer;
      }
      .segBtn.active { background: rgba(255,255,255,0.10); color: var(--text); }

      h2 { margin: 14px 0 0; font-size: 20px; }
      .sub { margin: 6px 0 0; color: var(--muted); font-size: 14px; }

      .banner {
        margin-top: 14px;
        border-radius: 14px;
        padding: 10px 12px;
        border: 1px solid var(--stroke);
        background: rgba(255,255,255,0.05);
        color: var(--muted);
        font-size: 13px;
        line-height: 1.35;
      }
      .banner.danger { border-color: rgba(255,77,109,0.35); background: rgba(255,77,109,0.12); color: var(--text); }
      .banner.warning { border-color: rgba(255,204,102,0.35); background: rgba(255,204,102,0.10); color: var(--text); }
      .banner.success { border-color: rgba(46,229,157,0.35); background: rgba(46,229,157,0.10); color: var(--text); }
      .hidden { display: none !important; }

      .form { margin-top: 14px; display: grid; gap: 12px; }
      label { display: block; font-size: 12px; color: rgba(255,255,255,0.55); margin-bottom: 6px; }
      .input {
        width: 100%;
        border: 1px solid var(--stroke);
        background: rgba(255,255,255,0.05);
        color: var(--text);
        padding: 12px;
        border-radius: 14px;
        outline: none;
      }
      .row2 { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
      @media (max-width: 520px) { .row2 { grid-template-columns: 1fr; } }

      .actions { display: grid; gap: 10px; margin-top: 6px; }
      .btn {
        border: 1px solid var(--stroke);
        background: rgba(255,255,255,0.06);
        color: var(--text);
        padding: 12px 14px;
        border-radius: 14px;
        cursor: pointer;
        font-weight: 900;
      }
      .btn.primary {
        border-color: rgba(124,92,255,0.45);
        background: linear-gradient(135deg, rgba(124,92,255,0.95), rgba(66,211,255,0.55));
      }
      .btn:disabled { opacity: 0.55; cursor: not-allowed; }

      .aside { padding: 20px; display: grid; gap: 14px; }
      .mini {
        border: 1px solid var(--stroke);
        background: rgba(255,255,255,0.05);
        border-radius: 16px;
        padding: 14px;
      }
      .mini h3 { margin: 0; font-size: 16px; }
      .mini p { margin: 6px 0 0; color: var(--muted); font-size: 13px; line-height: 1.45; }
      .miniTitleRow { display:flex; align-items:center; justify-content:space-between; gap:10px; }
      .miniTitleRow .btn { padding: 8px 10px; border-radius: 12px; font-weight: 900; }

      /* Matching */
      .topRow { display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap; }
      .chips { display:grid; grid-template-columns: 1.2fr 0.8fr 0.8fr 0.8fr; gap:10px; margin-top:14px; }
      @media (max-width: 820px) { .chips { grid-template-columns: 1fr 1fr; } }
      @media (max-width: 520px) { .chips { grid-template-columns: 1fr; } }

      .chip { border: 1px solid var(--stroke); background: rgba(255,255,255,0.05); border-radius: 16px; padding: 10px; }
      .chip .input { padding: 10px 12px; border-radius: 12px; }

      .listMeta { margin-top: 12px; color: var(--muted); font-size: 13px; display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap; }

      .cards { margin-top: 12px; display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }
      @media (max-width: 720px) { .cards { grid-template-columns: 1fr; } }

      .card { border: 1px solid var(--stroke); background: rgba(255,255,255,0.05); border-radius: 18px; padding: 14px; }
      .cardTop { display:flex; justify-content:space-between; gap:12px; align-items:flex-start; }
      .name { font-weight: 950; font-size: 16px; }
      .small { color: var(--muted); font-size: 13px; margin-top: 4px; line-height: 1.35; }
      .badge { border: 1px solid var(--stroke); background: rgba(255,255,255,0.06); border-radius: 999px; padding: 6px 10px; font-weight: 900; font-size: 12px; white-space: nowrap; }
      .stats { display:flex; gap:8px; flex-wrap:wrap; margin-top:12px; }
      .stat { border: 1px solid var(--stroke); background: rgba(0,0,0,0.18); border-radius: 12px; padding: 8px 10px; font-size: 12px; color: rgba(255,255,255,0.85); }
      .cardActions { margin-top: 12px; display:flex; gap:10px; flex-wrap:wrap; }

      /* Requests list */
      .reqItem { border: 1px solid var(--stroke); background: rgba(0,0,0,0.18); border-radius: 14px; padding: 10px 12px; margin-top: 10px; }
      .reqTop { display:flex; align-items:flex-start; justify-content:space-between; gap:10px; }
      .reqTitle { font-weight: 950; font-size: 13px; }
      .reqMeta { color: var(--muted); font-size: 12px; margin-top: 4px; line-height: 1.35; }
      .reqStatus { font-size: 11px; font-weight: 900; border: 1px solid var(--stroke); border-radius: 999px; padding: 6px 10px; white-space: nowrap; }

      /* Modal */
      .modalBackdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.55); display: none; place-items: center; z-index: 80; padding: 16px; }
      .modalBackdrop.show { display: grid; }
      .modal { width: min(640px, 100%); border: 1px solid var(--stroke); background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04)); border-radius: 18px; box-shadow: var(--shadow); overflow: hidden; }
      .modalHeader { padding: 16px 18px; border-bottom: 1px solid var(--stroke); display:flex; align-items:center; justify-content:space-between; gap: 12px; }
      .modalHeader .title { font-weight: 950; }
      .modalBody { padding: 16px 18px; }
      .modalGrid { display:grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 12px; }
      @media (max-width: 520px) { .modalGrid { grid-template-columns: 1fr; } }
      .summary { margin-top: 12px; border: 1px solid var(--stroke); border-radius: 14px; padding: 12px; background: rgba(0,0,0,0.18); color: rgba(255,255,255,0.85); font-size: 13px; line-height: 1.45; }

      .toast {
        position: fixed; left: 50%; bottom: 22px; transform: translateX(-50%) translateY(14px);
        opacity: 0; pointer-events: none;
        padding: 10px 12px; border-radius: 14px; border: 1px solid var(--stroke);
        background: rgba(15, 18, 35, 0.85); box-shadow: var(--shadow);
        color: var(--text); font-weight: 900; font-size: 13px;
        transition: 200ms ease; max-width: min(560px, calc(100% - 24px)); text-align: center; z-index: 90;
      }
      .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

      .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.28); display: none; place-items: center; z-index: 40; }
      body.busy .overlay { display: grid; }
      .spinner { width: 46px; height: 46px; border-radius: 999px; border: 3px solid rgba(255,255,255,0.25); border-top-color: rgba(255,255,255,0.85); animation: spin 1s linear infinite; }
      @keyframes spin { to { transform: rotate(360deg); } }
    </style>
  </head>

  <body>
    <div class="wrap">
      <section class="panel">
        <div class="hero">
          <div class="brand">
            <div class="logo" aria-hidden="true"></div>
            <div>
              <h1>KB Baby Sitter Match</h1>
              <p class="tagline">Key Biscayne parents & babysitters â€” simple, clean, trusted.</p>
            </div>
          </div>
        </div>

        <!-- AUTH CARD -->
        <div id="authCard" class="content">
          <div class="segmented">
            <button id="toggleSignup" class="segBtn active" type="button">Sign up</button>
            <button id="toggleLogin" class="segBtn" type="button">Log in</button>
          </div>

          <h2 id="modeTitle">Create your account</h2>
          <p id="modeSubtitle" class="sub">Create a profile and start matching.</p>

          <div id="banner" class="banner hidden"></div>

          <div class="form">
            <div id="fieldNombre">
              <label for="nombre">Name</label>
              <input id="nombre" class="input" placeholder="e.g., MartÃ­n" />
            </div>

            <div class="row2">
              <div>
                <label for="email">Email</label>
                <input id="email" class="input" type="email" placeholder="you@email.com" autocomplete="email" />
              </div>
              <div>
                <label for="password">Password</label>
                <input id="password" class="input" type="password" placeholder="At least 8 characters" />
              </div>
            </div>

            <div id="fieldRol">
              <label for="rol">Role</label>
              <select id="rol" class="input">
                <option value="padre">Parent</option>
                <option value="babysitter">Babysitter</option>
              </select>
            </div>

            <div class="actions">
              <button id="btnPrimary" class="btn primary" type="button">Create account</button>
              <button id="btnSecondary" class="btn" type="button">I already have an account</button>
            </div>
          </div>
        </div>

        <!-- AUTHED + MATCHING CARD -->
        <div id="authedCard" class="content hidden">
          <div class="topRow">
            <div>
              <div style="font-weight:950; font-size:16px;">Hi, <span id="helloName">friend</span> ðŸ‘‹</div>
              <div style="color: var(--muted); font-size: 13px;" id="helloMeta">Signed in</div>
            </div>
            <button id="btnLogout" class="btn" type="button">Log out</button>
          </div>

          <div class="banner success" style="margin-top: 14px;">
            Matching + Booking âœ… (Commission is 0% for now)
          </div>

          <!-- Filters -->
          <div class="chips">
            <div class="chip">
              <label for="q">Search</label>
              <input id="q" class="input" placeholder="Name or bio..." />
            </div>

            <div class="chip">
              <label for="maxRate">Max $/hour</label>
              <input id="maxRate" class="input" type="number" min="0" step="1" placeholder="e.g., 30" />
            </div>

            <div class="chip">
              <label for="minRating">Min rating</label>
              <input id="minRating" class="input" type="number" min="0" max="5" step="0.1" placeholder="e.g., 4.7" />
            </div>

            <div class="chip">
              <label for="onlyAvailable">Availability</label>
              <select id="onlyAvailable" class="input">
                <option value="all">All</option>
                <option value="true">Available only</option>
              </select>
            </div>
          </div>

          <div class="listMeta">
            <div id="resultsMeta">Loading babysittersâ€¦</div>
            <button id="btnRefresh" class="btn" type="button">Refresh</button>
          </div>

          <div id="cards" class="cards"></div>
        </div>
      </section>

      <aside class="panel aside">
        <!-- Parent panel -->
        <div id="panelParent" class="mini">
          <div class="miniTitleRow">
            <h3>My Requests</h3>
            <button id="btnReloadBookings" class="btn" type="button">Reload</button>
          </div>
          <p>These are your booking requests.</p>
          <div id="bookingsList"></div>
        </div>

        <!-- Babysitter panel -->
        <div id="panelBabysitter" class="mini hidden">
          <div class="miniTitleRow">
            <h3>Incoming Requests</h3>
            <button id="btnReloadIncoming" class="btn" type="button">Reload</button>
          </div>
          <p>These are bookings assigned to you. Accept or decline.</p>
          <div id="incomingList"></div>
        </div>

        <div class="mini">
          <h3>Commission</h3>
          <p>Commission is currently <b>0%</b>. Later we turn it on + Stripe.</p>
        </div>
      </aside>
    </div>

    <!-- Booking Modal -->
    <div id="modalBackdrop" class="modalBackdrop">
      <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modalHeader">
          <div class="title" id="modalTitle">Request booking</div>
          <button id="btnCloseModal" class="btn" type="button">Close</button>
        </div>

        <div class="modalBody">
          <div class="small" style="color: rgba(255,255,255,0.75);">
            Babysitter: <b id="modalBabysitterName">â€”</b>
          </div>

          <div class="modalGrid">
            <div>
              <label for="bkDate">Date</label>
              <input id="bkDate" class="input" type="date" />
            </div>
            <div>
              <label for="bkTime">Start time</label>
              <input id="bkTime" class="input" type="time" />
            </div>
            <div>
              <label for="bkHours">Hours</label>
              <input id="bkHours" class="input" type="number" min="1" max="24" step="1" value="3" />
            </div>
            <div>
              <label for="bkRate">Rate ($/hour)</label>
              <input id="bkRate" class="input" type="number" min="0" step="1" />
            </div>
          </div>

          <div style="margin-top: 12px;">
            <label for="bkNotes">Notes</label>
            <input id="bkNotes" class="input" placeholder="e.g., 2 kids, bedtime at 8pm, allergies..." />
          </div>

          <div id="bkSummary" class="summary"></div>

          <div class="actions" style="margin-top: 12px;">
            <button id="btnSubmitBooking" class="btn primary" type="button">Send request</button>
          </div>
        </div>
      </div>
    </div>

    <div class="overlay" aria-hidden="true"><div class="spinner"></div></div>
    <div id="toast" class="toast"></div>

    <script type="module" src="./app.js"></script>
  </body>
</html>
